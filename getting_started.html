<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>起步 | Stat-埋点统计</title>
    <meta name="description" content="Stat-埋点统计">
    
    
    <link rel="preload" href="/buried-fe/assets/css/0.styles.8fbed962.css" as="style"><link rel="preload" href="/buried-fe/assets/js/app.3a49040e.js" as="script"><link rel="preload" href="/buried-fe/assets/js/12.131c0641.js" as="script"><link rel="prefetch" href="/buried-fe/assets/js/8.a8000e86.js"><link rel="prefetch" href="/buried-fe/assets/js/2.61c5963e.js"><link rel="prefetch" href="/buried-fe/assets/js/3.041979ff.js"><link rel="prefetch" href="/buried-fe/assets/js/4.8b57a6c1.js"><link rel="prefetch" href="/buried-fe/assets/js/5.8044720e.js"><link rel="prefetch" href="/buried-fe/assets/js/6.3f6e3688.js"><link rel="prefetch" href="/buried-fe/assets/js/7.8510cf8e.js"><link rel="prefetch" href="/buried-fe/assets/js/9.130d985d.js"><link rel="prefetch" href="/buried-fe/assets/js/10.078afe7d.js"><link rel="prefetch" href="/buried-fe/assets/js/11.b51b661a.js"><link rel="prefetch" href="/buried-fe/assets/js/13.f4970122.js"><link rel="prefetch" href="/buried-fe/assets/js/14.c29b5440.js"><link rel="prefetch" href="/buried-fe/assets/js/15.dc88883e.js"><link rel="prefetch" href="/buried-fe/assets/js/16.d2a9f021.js"><link rel="prefetch" href="/buried-fe/assets/js/17.9189e08b.js"><link rel="prefetch" href="/buried-fe/assets/js/18.c505996d.js">
    <link rel="stylesheet" href="/buried-fe/assets/css/0.styles.8fbed962.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/buried-fe/" class="home-link router-link-active"><!----><span class="site-name">
      Stat-埋点统计
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/buried-fe/" class="nav-link">指南</a></div><div class="nav-item"><a href="/buried-fe/show/wst.html" class="nav-link">展示</a></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/buried-fe/" class="nav-link">指南</a></div><div class="nav-item"><a href="/buried-fe/show/wst.html" class="nav-link">展示</a></div><!----></nav><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>指南</span><!----></p><ul class="sidebar-group-items"><li><a href="/buried-fe/" class="sidebar-link">介绍</a></li><li><a href="/buried-fe/getting_started.html" class="active sidebar-link">起步</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/buried-fe/getting_started.html#项目安装" class="sidebar-link">项目安装</a></li></ul></li><li><a href="/buried-fe/common_key.html" class="sidebar-link">公共字段说明</a></li><li><a href="/buried-fe/pro_key.html" class="sidebar-link">业务通用字段说明</a></li><li><a href="/buried-fe/time_key.html" class="sidebar-link">时间字段说明</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>展示</span><!----></p><ul class="sidebar-group-items"><li><a href="/buried-fe/show/wst.html" class="sidebar-link">白屏时间</a></li><li><a href="/buried-fe/show/old.html" class="sidebar-link">加载时间</a></li><li><a href="/buried-fe/show/api.html" class="sidebar-link">接口请求时间</a></li><li><a href="/buried-fe/show/error.html" class="sidebar-link">接口错误</a></li></ul></div></li></ul></div><div class="page"><div class="content"><h1 id="起步"><a href="#起步" aria-hidden="true" class="header-anchor">#</a> 起步</h1><h2 id="项目安装"><a href="#项目安装" aria-hidden="true" class="header-anchor">#</a> 项目安装</h2><blockquote><h5 id="如果你想要在一个已有vue项目中使用，就应该将-stat-安装为本地依赖。"><a href="#如果你想要在一个已有vue项目中使用，就应该将-stat-安装为本地依赖。" aria-hidden="true" class="header-anchor">#</a> 如果你想要在一个已有Vue项目中使用，就应该将 Stat 安装为本地依赖。</h5></blockquote><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 安装为本地依赖项</span>
<span class="token function">npm</span> <span class="token function">install</span> -S @qiaoba/stat
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 可在你的项目的入口文件处 引入该文件并执行。</span>
<span class="token keyword">import</span> log <span class="token keyword">from</span> <span class="token string">'@qiaoba/stat'</span><span class="token punctuation">;</span>
<span class="token comment">// 入口 .vue new实例 初始化</span>
log<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>
    <span class="token string">'http://www.baidu.com'</span><span class="token punctuation">,</span> <span class="token comment">// log日志 发送的地址 格式请严格按照例子</span>
    <span class="token punctuation">{</span>
        pid<span class="token punctuation">:</span> <span class="token number">801</span><span class="token punctuation">,</span> <span class="token comment">// 设置 项目id</span>
        ref<span class="token punctuation">:</span> <span class="token string">'rrcp-settle'</span> <span class="token comment">// 设置 项目name</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 更新 基础必填 params参数</span>
$$log<span class="token punctuation">.</span><span class="token function">upDataPa</span><span class="token punctuation">(</span>
    uname<span class="token punctuation">:</span> <span class="token string">'/api/sms/code'</span><span class="token punctuation">,</span>
    uid<span class="token punctuation">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
    v<span class="token punctuation">:</span> <span class="token string">&quot;1.0.0&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 项目内部使用 例如接口统计</span>
$$log<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    params<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        au<span class="token punctuation">:</span> <span class="token string">'/api/sms/code'</span><span class="token punctuation">,</span>
        at<span class="token punctuation">:</span> <span class="token number">123</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><h5 id="requirejs项目中使用"><a href="#requirejs项目中使用" aria-hidden="true" class="header-anchor">#</a> requireJS项目中使用</h5></blockquote><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 找到main.js (你的require.config的位置),添加下面这样一行代码</span>
require<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token comment">// 要引入的文件 埋点</span>
    <span class="token string">&quot;settle-log&quot;</span><span class="token punctuation">:</span> <span class="token string">'https://busi.rrcimg.com/stat/log'</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 到你要添加log的文件（一般app.js）下， 引入文件。</span>

<span class="token comment">// 引入 settle-log =&gt; Log =&gt; Log.init</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'jquery'</span><span class="token punctuation">,</span> <span class="token string">'angular'</span><span class="token punctuation">,</span> <span class="token string">'ngAMD'</span><span class="token punctuation">,</span> <span class="token string">'ngCookies'</span><span class="token punctuation">,</span> <span class="token string">'loginInterceptor'</span><span class="token punctuation">,</span> <span class="token string">'watermark'</span><span class="token punctuation">,</span><span class="token string">'settle-log'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span>jquery<span class="token punctuation">,</span> angular<span class="token punctuation">,</span> ngAMD<span class="token punctuation">,</span> ngCookies<span class="token punctuation">,</span> loginInterceptor<span class="token punctuation">,</span> RrcWatermark<span class="token punctuation">,</span> Log<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token string">'use strict'</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> app <span class="token operator">=</span> angular<span class="token punctuation">.</span><span class="token function">module</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'ngCookies'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        app<span class="token punctuation">.</span><span class="token function">factory</span><span class="token punctuation">(</span><span class="token string">'loginInterceptor'</span><span class="token punctuation">,</span> loginInterceptor<span class="token punctuation">)</span><span class="token punctuation">;</span>
        app<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'$httpProvider'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>$httpProvider<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            $httpProvider<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>common<span class="token punctuation">[</span><span class="token string">&quot;X-REQUESTED-WITH&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'XMLHttpRequest'</span><span class="token punctuation">;</span>
            $httpProvider<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'loginInterceptor'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        app<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'$stateProvider'</span><span class="token punctuation">,</span> <span class="token string">'$urlRouterProvider'</span><span class="token punctuation">,</span>
            <span class="token keyword">function</span> <span class="token punctuation">(</span>$stateProvider<span class="token punctuation">,</span> $urlRouterProvider<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                $urlRouterProvider<span class="token punctuation">.</span><span class="token function">when</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;main&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                $stateProvider<span class="token punctuation">.</span><span class="token function">state</span><span class="token punctuation">(</span><span class="token string">'settle'</span><span class="token punctuation">,</span> ngAMD<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                    url<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
                    templateUrl<span class="token punctuation">:</span> <span class="token string">'html/base.html'</span><span class="token punctuation">,</span>
                    controller<span class="token punctuation">:</span> <span class="token string">'baseController'</span><span class="token punctuation">,</span>
                    resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                        current_user<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>$http<span class="token punctuation">,</span> $q<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            <span class="token comment">//获取用户信息</span>
                            <span class="token keyword">return</span> $http<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&quot;/user/currentUser&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>response <span class="token operator">||</span> <span class="token operator">!</span>response<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                    <span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">;</span>
                                <span class="token punctuation">}</span>
                                <span class="token keyword">new</span> <span class="token class-name">RrcWatermark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span>text<span class="token punctuation">:</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>name <span class="token operator">||</span> <span class="token string">'人人车'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
                                
                                <span class="token comment">// 埋点</span>
                                Log<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>
                                    <span class="token string">'http://settle.shanyishanmei.com:8088'</span><span class="token punctuation">,</span>
                                    <span class="token punctuation">{</span>
                                        pid<span class="token punctuation">:</span> <span class="token string">'8002'</span><span class="token punctuation">,</span>
                                        ref<span class="token punctuation">:</span> <span class="token string">'rrc-cw-settle-old'</span><span class="token punctuation">,</span>
                                        uid<span class="token punctuation">:</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>id <span class="token operator">||</span> <span class="token string">'-'</span><span class="token punctuation">,</span>
                                        uname<span class="token punctuation">:</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>name <span class="token operator">||</span> <span class="token string">'-'</span>
                                    <span class="token punctuation">}</span>
                                <span class="token punctuation">)</span><span class="token punctuation">;</span>
                                <span class="token keyword">return</span> response<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
                            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><h5 id="其他文件形式的引用"><a href="#其他文件形式的引用" aria-hidden="true" class="header-anchor">#</a> 其他文件形式的引用</h5></blockquote><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>//busi.rrcimg.com/stat/log.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
    <span class="token keyword">new</span> <span class="token class-name">window<span class="token punctuation">.</span>log<span class="token punctuation">.</span>init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></div><div class="page-edit"><!----><!----></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/buried-fe/" class="prev router-link-active">
          介绍
        </a></span><span class="next"><a href="/buried-fe/common_key.html">
          公共字段说明
        </a> →
      </span></p></div></div></div></div>
    <script src="/buried-fe/assets/js/12.131c0641.js" defer></script><script src="/buried-fe/assets/js/app.3a49040e.js" defer></script>
  </body>
</html>
